{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Messaging Systems Registry",
  "description": "Schema for validating the messaging systems registry YAML file",
  "type": "object",
  "required": ["version", "systems"],
  "properties": {
    "version": {
      "type": ["string", "number"],
      "description": "Registry version identifier"
    },
    "last_updated": {
      "type": "string",
      "description": "ISO timestamp of last update"
    },
    "systems": {
      "type": "array",
      "minItems": 1,
      "description": "Array of messaging system definitions",
      "items": {
        "type": "object",
        "required": ["id", "name", "category", "module", "entrypoint", "critical"],
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^[a-z0-9_\\-]+$",
            "description": "Unique system identifier (lowercase, alphanumeric, underscores, hyphens)"
          },
          "name": {
            "type": "string",
            "minLength": 1,
            "description": "Human-readable system name"
          },
          "category": {
            "type": "string",
            "enum": ["core", "cli", "external", "ai", "supporting"],
            "description": "System category classification"
          },
          "module": {
            "type": "string",
            "minLength": 1,
            "description": "Python module path for the system"
          },
          "entrypoint": {
            "type": "string",
            "minLength": 1,
            "description": "Class or function name to import from the module"
          },
          "critical": {
            "type": "boolean",
            "description": "Whether this system is critical for operations"
          }
        },
        "additionalProperties": true
      }
    }
  },
  "additionalProperties": true
}
