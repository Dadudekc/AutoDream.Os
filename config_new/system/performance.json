{
  "performance_monitoring": {
    "version": "1.0.0",
    "enabled": true,
    "collection_interval": 30,
    "retention_period": 86400,
    "max_data_points": 10000,
    "cleanup_interval": 3600,

    "collectors": {
      "system_metrics": {
        "enabled": true,
        "collection_interval": 30,
        "collect_cpu": true,
        "collect_memory": true,
        "collect_disk": true,
        "collect_network": true,
        "per_cpu_metrics": true,
        "disk_io_metrics": true,
        "network_interface_metrics": true
      },
      "application_metrics": {
        "enabled": true,
        "collection_interval": 60,
        "app_name": "agent_cellphone_v2",
        "collect_process_metrics": true,
        "collect_request_metrics": true,
        "collect_response_time_metrics": true,
        "collect_error_metrics": true
      },
      "network_metrics": {
        "enabled": true,
        "collection_interval": 60,
        "collect_connection_metrics": true,
        "collect_interface_metrics": true,
        "monitored_ports": [8080, 8443, 9090]
      },
      "custom_metrics": {
        "enabled": true,
        "collection_interval": 120,
        "metrics": {
          "integration_health": {
            "description": "Overall integration system health",
            "function": "get_integration_health_score"
          },
          "active_agents": {
            "description": "Number of active agents",
            "function": "count_active_agents"
          },
          "queue_depth": {
            "description": "Message queue depth",
            "function": "get_message_queue_depth"
          }
        }
      }
    },

    "dashboard": {
      "enabled": true,
      "host": "0.0.0.0",
      "port": 8080,
      "auto_refresh": true,
      "refresh_interval": 5,
      "theme": "dark",
      "websocket_enabled": true,
      "max_websocket_connections": 100,
      "static_files_path": "static/dashboard",

      "widgets": [
        {
          "id": "cpu_usage",
          "title": "CPU Usage",
          "chart_type": "line",
          "metric_name": "cpu_usage_percent",
          "width": 6,
          "height": 4,
          "position_x": 0,
          "position_y": 0,
          "time_range": 3600,
          "aggregation": "raw",
          "options": {
            "min_value": 0,
            "max_value": 100,
            "warning_threshold": 70,
            "critical_threshold": 90
          }
        },
        {
          "id": "memory_usage",
          "title": "Memory Usage",
          "chart_type": "gauge",
          "metric_name": "memory_usage_percent",
          "width": 3,
          "height": 4,
          "position_x": 6,
          "position_y": 0,
          "options": {
            "min_value": 0,
            "max_value": 100,
            "warning_threshold": 80,
            "critical_threshold": 95
          }
        },
        {
          "id": "disk_usage",
          "title": "Disk Usage",
          "chart_type": "bar",
          "metric_name": "disk_usage_percent",
          "width": 3,
          "height": 4,
          "position_x": 9,
          "position_y": 0,
          "options": {
            "warning_threshold": 80,
            "critical_threshold": 90
          }
        },
        {
          "id": "network_traffic",
          "title": "Network Traffic",
          "chart_type": "area",
          "metric_name": "network_bytes_sent_total",
          "width": 6,
          "height": 4,
          "position_x": 0,
          "position_y": 4,
          "time_range": 1800,
          "aggregation": "raw"
        },
        {
          "id": "response_times",
          "title": "Response Times",
          "chart_type": "line",
          "metric_name": "app_response_time_avg_seconds",
          "width": 6,
          "height": 4,
          "position_x": 6,
          "position_y": 4,
          "time_range": 3600,
          "options": {
            "warning_threshold": 0.5,
            "critical_threshold": 1.0
          }
        },
        {
          "id": "error_rate",
          "title": "Error Rate",
          "chart_type": "gauge",
          "metric_name": "app_errors_total",
          "width": 4,
          "height": 3,
          "position_x": 0,
          "position_y": 8,
          "aggregation": "rate",
          "options": {
            "max_value": 100,
            "warning_threshold": 5,
            "critical_threshold": 10
          }
        },
        {
          "id": "active_connections",
          "title": "Active Connections",
          "chart_type": "gauge",
          "metric_name": "network_connections",
          "width": 4,
          "height": 3,
          "position_x": 4,
          "position_y": 8,
          "filters": {
            "state": "ESTABLISHED"
          }
        },
        {
          "id": "recent_alerts",
          "title": "Recent Alerts",
          "chart_type": "table",
          "metric_name": "alerts_history",
          "width": 4,
          "height": 3,
          "position_x": 8,
          "position_y": 8,
          "time_range": 3600
        }
      ]
    },

    "alerting": {
      "enabled": true,
      "default_cooldown_period": 300,
      "max_alert_history": 1000,
      "deduplication_enabled": true,

      "rules": [
        {
          "name": "High CPU Usage",
          "metric_name": "cpu_usage_percent",
          "condition": "greater_than",
          "threshold": 85.0,
          "severity": "warning",
          "description": "CPU usage is above 85%",
          "enabled": true,
          "cooldown_period": 300,
          "consecutive_violations": 2,
          "channels": ["email", "slack"]
        },
        {
          "name": "Critical CPU Usage",
          "metric_name": "cpu_usage_percent",
          "condition": "greater_than",
          "threshold": 95.0,
          "severity": "critical",
          "description": "CPU usage is critically high at 95%+",
          "enabled": true,
          "cooldown_period": 180,
          "consecutive_violations": 1,
          "channels": ["email", "slack", "pagerduty"]
        },
        {
          "name": "High Memory Usage",
          "metric_name": "memory_usage_percent",
          "condition": "greater_than",
          "threshold": 90.0,
          "severity": "warning",
          "description": "Memory usage is above 90%",
          "enabled": true,
          "cooldown_period": 300,
          "consecutive_violations": 2,
          "channels": ["email", "slack"]
        },
        {
          "name": "Critical Memory Usage",
          "metric_name": "memory_usage_percent",
          "condition": "greater_than",
          "threshold": 98.0,
          "severity": "critical",
          "description": "Memory usage is critically high",
          "enabled": true,
          "cooldown_period": 120,
          "consecutive_violations": 1,
          "channels": ["email", "slack", "pagerduty"]
        },
        {
          "name": "Disk Space Low",
          "metric_name": "disk_usage_percent",
          "condition": "greater_than",
          "threshold": 85.0,
          "severity": "warning",
          "description": "Disk space is running low",
          "enabled": true,
          "cooldown_period": 1800,
          "consecutive_violations": 1,
          "channels": ["email", "slack"]
        },
        {
          "name": "Disk Space Critical",
          "metric_name": "disk_usage_percent",
          "condition": "greater_than",
          "threshold": 95.0,
          "severity": "critical",
          "description": "Disk space is critically low",
          "enabled": true,
          "cooldown_period": 600,
          "consecutive_violations": 1,
          "channels": ["email", "slack", "pagerduty"]
        },
        {
          "name": "High Response Time",
          "metric_name": "app_response_time_avg_seconds",
          "condition": "greater_than",
          "threshold": 2.0,
          "severity": "warning",
          "description": "Application response time is high",
          "enabled": true,
          "cooldown_period": 300,
          "consecutive_violations": 3,
          "channels": ["email", "slack"]
        },
        {
          "name": "High Error Rate",
          "metric_name": "app_errors_total",
          "condition": "greater_than",
          "threshold": 10,
          "severity": "warning",
          "description": "Application error rate is high",
          "enabled": true,
          "cooldown_period": 300,
          "consecutive_violations": 2,
          "channels": ["email", "slack"]
        },
        {
          "name": "Integration System Down",
          "metric_name": "integration_health",
          "condition": "less_than",
          "threshold": 0.5,
          "severity": "critical",
          "description": "Integration system health is critically low",
          "enabled": true,
          "cooldown_period": 180,
          "consecutive_violations": 1,
          "channels": ["email", "slack", "pagerduty"]
        }
      ],

      "channels": {
        "email": {
          "type": "email",
          "enabled": true,
          "min_severity": "warning",
          "rate_limit_seconds": 300,
          "smtp_server": "smtp.gmail.com",
          "smtp_port": 587,
          "use_tls": true,
          "username": "alerts@agent-cellphone.local",
          "password": "${SMTP_PASSWORD}",
          "sender_email": "noreply@agent-cellphone.local",
          "recipients": [
            "admin@agent-cellphone.local",
            "ops@agent-cellphone.local"
          ]
        },
        "slack": {
          "type": "slack",
          "enabled": true,
          "min_severity": "warning",
          "rate_limit_seconds": 180,
          "webhook_url": "${SLACK_WEBHOOK_URL}",
          "channel": "#alerts",
          "username": "AlertBot",
          "icon_emoji": ":warning:"
        },
        "discord": {
          "type": "discord",
          "enabled": false,
          "min_severity": "critical",
          "rate_limit_seconds": 120,
          "webhook_url": "${DISCORD_WEBHOOK_URL}",
          "username": "AlertBot"
        },
        "pagerduty": {
          "type": "pagerduty",
          "enabled": false,
          "min_severity": "critical",
          "rate_limit_seconds": 60,
          "integration_key": "${PAGERDUTY_INTEGRATION_KEY}",
          "api_url": "https://events.pagerduty.com/v2/enqueue"
        },
        "webhook": {
          "type": "webhook",
          "enabled": false,
          "min_severity": "warning",
          "rate_limit_seconds": 120,
          "webhook_url": "${CUSTOM_WEBHOOK_URL}",
          "method": "POST",
          "headers": {
            "Content-Type": "application/json",
            "Authorization": "Bearer ${WEBHOOK_TOKEN}"
          }
        }
      }
    },

    "security": {
      "authentication": {
        "enabled": false,
        "type": "basic",
        "username": "admin",
        "password": "${DASHBOARD_PASSWORD}"
      },
      "rate_limiting": {
        "enabled": true,
        "requests_per_minute": 60,
        "burst_size": 10
      },
      "cors": {
        "enabled": true,
        "allowed_origins": ["*"],
        "allowed_methods": ["GET", "POST"],
        "allowed_headers": ["Content-Type", "Authorization"]
      }
    },

    "storage": {
      "type": "memory",
      "retention_policy": {
        "raw_data_hours": 24,
        "aggregated_data_days": 7,
        "alert_history_days": 30
      },
      "compression": {
        "enabled": false,
        "algorithm": "gzip",
        "threshold_bytes": 1048576
      }
    },

    "performance": {
      "collection_threads": 4,
      "max_concurrent_alerts": 50,
      "websocket_buffer_size": 1024,
      "metric_batch_size": 100,
      "async_processing": true,
      "cache_metrics": true,
      "cache_ttl_seconds": 60
    },

    "logging": {
      "level": "INFO",
      "format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s",
      "file": "logs/performance_monitoring.log",
      "max_file_size": "10MB",
      "backup_count": 5,
      "rotate_daily": true
    },

    "integration": {
      "prometheus": {
        "enabled": false,
        "port": 9090,
        "metrics_path": "/metrics",
        "push_gateway": "http://localhost:9091"
      },
      "grafana": {
        "enabled": false,
        "url": "http://localhost:3000",
        "api_key": "${GRAFANA_API_KEY}",
        "datasource": "prometheus"
      },
      "elasticsearch": {
        "enabled": false,
        "hosts": ["localhost:9200"],
        "index_pattern": "performance-metrics-{date}",
        "username": "${ELASTICSEARCH_USERNAME}",
        "password": "${ELASTICSEARCH_PASSWORD}"
      }
    },

    "development": {
      "debug_mode": false,
      "mock_data": false,
      "test_alerts": false,
      "profiling": false,
      "hot_reload": true
    }
  }
}
