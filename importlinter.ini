[importlinter]
root_package = src

[contract:layers]
name = ddd_layers
type = layers
layers =
    src.domain
    src.application
    src.infrastructure
    src.interfaces
containers =
    src
ignore_imports =
    # Allow infrastructure to import from domain
    src.infrastructure.* -> src.domain.*
    # Allow interfaces to import from domain and application
    src.interfaces.* -> src.domain.*
    src.interfaces.* -> src.application.*
    # Allow application to import from domain
    src.application.* -> src.domain.*
    # Allow shared utilities across all layers
    src.* -> src.shared.*
    # Allow cross-imports within the same layer
    src.domain.* -> src.domain.*
    src.application.* -> src.application.*
    src.infrastructure.* -> src.infrastructure.*
    src.interfaces.* -> src.interfaces.*

[contract:forbidden]
name = no_domain_to_infrastructure
type = import
source_modules =
    src.domain
forbidden_modules =
    src.infrastructure
    src.application
    src.interfaces

[contract:forbidden]
name = no_infrastructure_to_application
type = import
source_modules =
    src.infrastructure
forbidden_modules =
    src.application
    src.interfaces
