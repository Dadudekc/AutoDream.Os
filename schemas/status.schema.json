{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Agent Status Schema v3.1",
  "description": "Unified status validation schema for swarm agents as part of V3.1 Unified Feedback Loop",
  "type": "object",
  "required": [
    "agent_id",
    "specialty",
    "coordinates",
    "status",
    "current_mission",
    "cycle_info",
    "last_updated",
    "performance_metrics"
  ],
  "properties": {
    "agent_id": {
      "type": "string",
      "pattern": "^Agent-[1-8]$",
      "description": "Unique agent identifier"
    },
    "specialty": {
      "type": "string",
      "enum": [
        "File Management & Cleanup",
        "Configuration & Infrastructure",
        "Core Systems & Architecture",
        "Quality Assurance & V2 Compliance",
        "Integration & Tooling",
        "Web Interface & Communication",
        "Dashboard & Visualization",
        "Monitoring & Analytics"
      ],
      "description": "Agent's primary specialty area"
    },
    "coordinates": {
      "type": "array",
      "items": {
        "type": "integer"
      },
      "minItems": 2,
      "maxItems": 2,
      "description": "Agent's position coordinates [x, y]"
    },
    "status": {
      "type": "string",
      "enum": ["active", "inactive", "busy", "error", "maintenance"],
      "description": "Current operational status"
    },
    "current_mission": {
      "type": "object",
      "required": ["mission_id", "title", "priority", "status", "progress"],
      "properties": {
        "mission_id": {
          "type": "string",
          "description": "Unique mission identifier"
        },
        "title": {
          "type": "string",
          "description": "Mission title"
        },
        "priority": {
          "type": "string",
          "enum": ["LOW", "REGULAR", "HIGH", "CRITICAL"],
          "description": "Mission priority level"
        },
        "status": {
          "type": "string",
          "enum": ["pending", "in_progress", "completed", "failed", "blocked"],
          "description": "Mission execution status"
        },
        "progress": {
          "type": "integer",
          "minimum": 0,
          "maximum": 100,
          "description": "Mission completion percentage"
        },
        "objectives": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["objective_id", "description", "status"],
            "properties": {
              "objective_id": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "status": {
                "type": "string",
                "enum": ["pending", "in_progress", "completed", "failed"]
              }
            }
          }
        }
      }
    },
    "cycle_info": {
      "type": "object",
      "required": ["cycle_number", "start_time", "duration"],
      "properties": {
        "cycle_number": {
          "type": "integer",
          "minimum": 1,
          "description": "Current cycle number"
        },
        "start_time": {
          "type": "string",
          "format": "date-time",
          "description": "Cycle start timestamp"
        },
        "duration": {
          "type": "string",
          "description": "Cycle duration (e.g., '24_hours')"
        },
        "end_time": {
          "type": "string",
          "format": "date-time",
          "description": "Cycle end timestamp"
        }
      }
    },
    "performance_metrics": {
      "type": "object",
      "required": ["tasks_completed", "files_processed", "coordination_score"],
      "properties": {
        "tasks_completed": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of tasks completed this cycle"
        },
        "files_processed": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of files processed"
        },
        "coordination_score": {
          "type": "integer",
          "minimum": 0,
          "maximum": 10,
          "description": "Coordination effectiveness score"
        },
        "quality_score": {
          "type": "integer",
          "minimum": 0,
          "maximum": 10,
          "description": "Code quality score"
        },
        "v2_compliance": {
          "type": "boolean",
          "description": "V2 compliance status"
        },
        "file_size_compliance": {
          "type": "boolean",
          "description": "File size compliance status"
        }
      }
    },
    "communication": {
      "type": "object",
      "properties": {
        "messages_sent": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of messages sent this cycle"
        },
        "messages_received": {
          "type": "integer",
          "minimum": 0,
          "description": "Number of messages received"
        },
        "inbox_status": {
          "type": "object",
          "properties": {
            "unread_count": {
              "type": "integer",
              "minimum": 0
            },
            "pending_responses": {
              "type": "integer",
              "minimum": 0
            }
          }
        }
      }
    },
    "deployment_status": {
      "type": "object",
      "properties": {
        "components_deployed": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["component_name", "status"],
            "properties": {
              "component_name": {
                "type": "string"
              },
              "status": {
                "type": "string",
                "enum": ["deployed", "pending", "failed", "testing"]
              },
              "deployment_time": {
                "type": "string",
                "format": "date-time"
              }
            }
          }
        },
        "integration_status": {
          "type": "object",
          "properties": {
            "swarm_contract": {
              "type": "string",
              "enum": ["active", "inactive", "error"]
            },
            "feedback_loop": {
              "type": "string",
              "enum": ["active", "inactive", "error"]
            },
            "cycle_automation": {
              "type": "string",
              "enum": ["active", "inactive", "error"]
            }
          }
        }
      }
    },
    "issues": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["issue_id", "description", "severity", "status"],
        "properties": {
          "issue_id": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "severity": {
            "type": "string",
            "enum": ["low", "medium", "high", "critical"]
          },
          "status": {
            "type": "string",
            "enum": ["open", "in_progress", "resolved", "closed"]
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "resolved_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      }
    },
    "next_cycle_plan": {
      "type": "object",
      "properties": {
        "upcoming_tasks": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["task_id", "description", "priority"],
            "properties": {
              "task_id": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "priority": {
                "type": "string",
                "enum": ["LOW", "REGULAR", "HIGH", "CRITICAL"]
              }
            }
          }
        },
        "dependencies": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "coordination_needs": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "last_updated": {
      "type": "string",
      "format": "date-time",
      "description": "Last status update timestamp"
    },
    "version": {
      "type": "string",
      "pattern": "^3\\.1$",
      "description": "Schema version"
    }
  },
  "additionalProperties": false
}
