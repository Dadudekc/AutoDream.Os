{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://agent-cellphone-v2.os/schemas/agent_checkin.schema.json",
  "title": "Agent Cellphone V2 Check-In Schema v3.1",
  "description": "Enhanced agent check-in validation schema aligned with status schema standards",
  "type": "object",
  "required": [
    "version", 
    "agent_id", 
    "agent_name", 
    "specialty", 
    "coordinates", 
    "status", 
    "current_mission",
    "cycle_info",
    "last_updated", 
    "current_phase"
  ],
  "properties": {
    "version": { 
      "type": "string", 
      "pattern": "^3\\.1$",
      "description": "Schema version aligned with status schema"
    },

    "agent_id": { 
      "type": "string", 
      "pattern": "^Agent-[1-8]$",
      "description": "Unique agent identifier"
    },
    "agent_name": { 
      "type": "string", 
      "minLength": 1,
      "description": "Human-readable agent name"
    },
    "specialty": {
      "type": "string",
      "enum": [
        "File Management & Cleanup",
        "Configuration & Infrastructure", 
        "Core Systems & Architecture",
        "Quality Assurance & V2 Compliance",
        "Integration & Tooling",
        "Web Interface & Communication",
        "Dashboard & Visualization",
        "Monitoring & Analytics",
        "Coordination & Communication"
      ],
      "description": "Agent's primary specialty area"
    },
    "coordinates": {
      "type": "array",
      "items": { "type": "integer" },
      "minItems": 2,
      "maxItems": 2,
      "description": "Agent's position coordinates [x, y]"
    },

    "status": { 
      "type": "string",
      "enum": ["active", "inactive", "busy", "error", "maintenance", "onboarding"],
      "description": "Current operational status"
    },
    "current_phase": { 
      "type": "string",
      "description": "Current mission phase"
    },
    "current_mission": {
      "type": "object",
      "required": ["mission_code", "title", "priority", "status", "progress"],
      "properties": {
        "mission_code": { "type": "string" },
        "title": { "type": "string" },
        "priority": { 
          "type": "string",
          "enum": ["LOW", "REGULAR", "HIGH", "CRITICAL"]
        },
        "status": { 
          "type": "string",
          "enum": ["pending", "in_progress", "completed", "failed", "blocked"]
        },
        "progress": { 
          "type": "integer",
          "minimum": 0,
          "maximum": 100
        }
      },
      "description": "Current mission information"
    },
    "cycle_info": {
      "type": "object",
      "required": ["cycle_number", "start_time"],
      "properties": {
        "cycle_number": { "type": "integer", "minimum": 1 },
        "start_time": { "type": "string", "format": "date-time" },
        "duration": { "type": "string" },
        "end_time": { "type": "string", "format": "date-time" }
      },
      "description": "Current cycle information"
    },

    "last_updated": { 
      "type": "string", 
      "format": "date-time",
      "description": "Last check-in timestamp"
    },

    "mission_priority": { 
      "type": "string",
      "enum": ["LOW", "REGULAR", "HIGH", "CRITICAL"],
      "description": "Mission priority level"
    },
    "last_milestone": { 
      "type": "string",
      "description": "Last completed milestone"
    },
    "next_milestone": { 
      "type": "string",
      "description": "Next planned milestone"
    },

    "current_tasks": { "type": "array", "items": { "type": "string" } },
    "completed_tasks": { "type": "array", "items": { "type": "string" } },
    "achievements": { "type": "array", "items": { "type": "string" } },

    "strategic_capabilities": { "type": "object", "additionalProperties": { "type": "string" } },
    "agent_status": { "type": "object", "additionalProperties": { "type": "string" } },
    "system_status": { "type": "object", "additionalProperties": { "type": "string" } },

    "syntax_fix_status": { "type": "object", "additionalProperties": true },
    "v2_compliance_status": { "type": "object", "additionalProperties": true },

    "next_actions": { "type": "array", "items": { "type": "string" } }
  },
  "additionalProperties": true
}
